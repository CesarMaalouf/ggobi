; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

[Setup]
AppName=ggobi
AppVerName=ggobi_@MAJOR_VERSION@.@MINOR_VERSION@-@PATCH_LEVEL@
AppPublisher=ggobi
AppPublisherURL=http://www.ggobi.org
AppSupportURL=http://www.ggobi.org
AppUpdatesURL=http://www.ggobi.org/Download
DefaultDirName={pf}\ggobi
DefaultGroupName=ggobi
AllowNoIcons=yes
;AlwaysCreateUninstallIcon=yes
LicenseFile=@GGOBI_HOME@/CPLicense.txt
OutputBaseFilename=ggobi_@MAJOR_VERSION@.@MINOR_VERSION@-@PATCH_LEVEL@
OutputDir=@GGOBI_HOME@/win32
; uncomment the following line if you want your installation to run on NT 3.51 too.
; MinVersion=4,3.51

[Tasks]
Name: "desktopicon"; Description: "Create a &desktop icon"; GroupDescription: "Additional icons:"; MinVersion: 4,4

[Files]
; The binary
Source: "@GGOBI_HOME@/bin/ggobi.bin"; DestDir: "{app}"; DestName: "ggobi.exe"; Flags: ignoreversion
; Get the data
Source: "@GGOBI_HOME@\data\*.*"; DestDir: "{app}\data"; Flags: ignoreversion
; The docs
Source: "@GGOBI_HOME@\doc\*.*"; DestDir: "{app}\doc"; Flags: ignoreversion
; The icon, ggobirc, and colorshemes
Source: "@GGOBI_HOME@\share\ggobi.ico"; DestDir: "{app}"; Flags: ignoreversion
Source: "@GGOBI_HOME@\ggobirc"; DestDir: "{app}"; Flags: ignoreversion
Source: "@GGOBI_HOME@\share\colorschemes.xml"; DestDir: "{app}\share"; Flags: ignoreversion
; The headers and libs, not necessary besides the dll
;Source: "@GGOBI_HOME@\src\*.h"; DestDir: "{app}\include"; Flags: ignoreversion
;Source: "@GGOBI_HOME@\lib\libggobi.a"; DestDir: "{app}\lib"; Flags: ignoreversion
Source: "@GGOBI_HOME@\lib\libggobi.dll"; DestDir: "{app}"; Flags: ignoreversion
; Plugins [should this be hardcoded or on-the-fly?]
Source: "@GGOBI_HOME@\plugins\ggvis\ggvis.dll"; DestDir: "{app}\plugins\ggvis\"; Flags: ignoreversion
;Source: "@GGOBI_HOME@\plugins\GraphAction\GraphAction.dll"; DestDir: "{app}\plugins\GraphAction\"; Flags: ignoreversion
;Source: "@GGOBI_HOME@\plugins\ExcelReader\ExcelReader.dll"; DestDir: "{app}\plugins\ExcelReader\"; Flags: ignoreversion
;Source: "@GGOBI_HOME@\plugins\GraphLayout\GraphLayout.dll"; DestDir: "{app}\plugins\GraphLayout\"; Flags: ignoreversion
Source: "@GGOBI_HOME@\plugins\DataViewer\DataViewer.dll"; DestDir: "{app}\plugins\DataViewer\"; Flags: ignoreversion
Source: "@GGOBI_HOME@\plugins\VarCloud\VarCloud.dll"; DestDir: "{app}\plugins\VarCloud\"; Flags: ignoreversion
Source: "@GGOBI_HOME@\plugins\DescribeDisplay\DescribeDisplay.dll"; DestDir: "{app}\plugins\DescribeDisplay\"; Flags: ignoreversion
; A utility for setting environment variables, install to tmp dir
Source: "@GGOBI_HOME@\win32\SetEnv.exe"; DestDir: "{tmp}"

[Run]
Filename: "{tmp}\SetEnv.exe"; Parameters: "-a Path ""%{app}"""

[Registry]
Root: HKLM; Subkey: "Software\GGobi"; ValueType: string; ValueName: "Home"; ValueData: "{app}"; Flags: uninsdeletekey

[INI]
Filename: "{app}\ggobi.url"; Section: "InternetShortcut"; Key: "URL"; String: "http://www.ggobi.org"

[Icons]
Name: "{group}\GGobi"; Filename: "{app}\ggobi.exe"; IconFilename: "{app}\ggobi.ico" ; WorkingDir: "{app}" ;
Name: "{group}\GGobi on the Web"; Filename: "{app}\ggobi.url"
Name: "{userdesktop}\GGobi"; Filename: "{app}\ggobi.exe"; IconFilename: "{app}\ggobi.ico";  Tasks: desktopicon

; IconFilename: "C:\WINDOWS\WINUPD.ICO";
Name: "{userdesktop}\ggobi"; Filename: "{app}\ggobi.exe";  MinVersion: 4,4; Tasks: desktopicon; WorkingDir: "{app}\data"; Comment: "GGobi Interactive, Dynamic Visualization Software"; Flags: runminimized ; IconFilename: "{app}\ggobi.ico"

[Run]
; Must put the "" around the data file since otherwise app may get broken into
; multiple words such as c:\Program Files\data\flea.xml, counting as two arguments!
Filename: "{app}\ggobi.exe"; Parameters: """{app}\data\flea.xml"""; Description: "Launch ggobi";

; nowait postinstall skipifsilent

[UninstallDelete]
Type: files; Name: "{app}\ggobi.url"

