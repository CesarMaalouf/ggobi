\documentclass[11pt]{article}
\usepackage{fullpage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% If it turns out that I can use pdflatex, I can use jpeg graphics
% files and go straight to pdf.

\newif\ifpdf
\ifx\pdfoutput\undefined
  \pdffalse
\else
  \pdftrue
\fi
  
\ifpdf
  \pdfoutput=1
  \usepackage[pdftex]{graphicx}  % uncomment if using graphicx
  %  \usepackage[pdftex]{hyperref}  % uncomment if using hyperref
\else
  \usepackage{graphicx}  % uncomment if using graphicx
  %  \usepackage{hyperref}  % uncomment if using hyperref
\fi
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\hyphenation{XGobi}
\hyphenation{ggobi}
\hyphenation{di-men-sion-al two--di-men-sion-al}
\input epsf
\def\Rcirc{\mbox{\small{\ooalign{\hfil\raise.07ex\hbox{\tiny R}\hfil\crcr\mathhexbox20D}}}}

\parindent 0in
\parskip 6pt

% I'm taking text from the 1997 xgobi paper wherever possible.
% (On fry, that's in /usr/dfs/papers/xgobi.1997/paper.tex)
%
%  slbl stands for 'section label'

\begin {document}

\title {ggobi manual}
\author{
Deborah F. Swayne, AT\&T Labs -- Research \\
Dianne Cook, Iowa State University \\
Andreas Buja, AT\&T Labs -- Research \\
Duncan Temple Lang, Lucent Bell Labs
}
\date{January 2001}

\maketitle


\begin{abstract}

The ggobi software is a data visualization system with state-of-the-art
interactive and dynamic methods for the manipulation of views of
data.  It represents a big step in the evolution of XGobi, with
multiple plotting windows, more flexible color management, XML file
handling, and better portability to Windows.

The most significant change is that ggobi can be embedded in other
software and controlled using an API (application programming
interface).  This design has been developed and tested in partnership
with R.  When ggobi is used with R, the result is a full marriage
between ggobi's direct manipulation graphical environment and R's
familiar extensible environment for statistical data analysis.

It has the same graphical functionality whether it is running
standalone or embedded in other software.  That functionality
includes 2-D displays of projections of points and lines in
high-dimensional spaces, as well as scatterplot matrices, parallel
coordinate and time series plots.  Projection tools include average
shifted histograms of single variables, plots of pairs of variables,
and grand tours of multiple variables.  Views of the data can be
reshaped.  Points can be labeled and brushed with glyphs and colors.
Several displays can be open simultaneously and linked for labeling
and brushing.  Missing data are accommodated and their patterns can
be examined.
\end{abstract}

\section{Introduction}

This paper gives an overview of the layout and functionality of ggobi,
interactive graphical software for exploratory data analysis.  Readers
who are familiar with xgobi will find much that is familiar in ggobi's
design, and might want to skip directly to section \ref{slbl:xgobi}
where key differences between the two tools are described.

You will find that you can use ggobi for simple tasks with virtually
no instruction.  All that a user needs is some cursory knowledge of
the developments in interactive statistical graphics of the last 15
years, as well as a willingness to experiment with the sample data
provided guided by the tooltips.  In parallel with the hands-on learning
process, it is probably useful to acquire a basic understanding of
the overall layout and functionality of the system.  The greatest
success is obtained by users who have gained experience with the
system and combine it with creativity and data analytic
sophistication.

We first describe the specifics of GGobi's layout and functionalities.
Figure~1 shows a GGobi window, made using a version that was
available in early 2001.

\vbox{
\vspace{.4in}
%\epsfxsize 6in \centerline{\epsfbox{figures/manual1.ps}}
\centerline{[Figure 1 here]}

\vspace{.15in} \centerline{ \parbox{6in}
{Figure~1: Layout of a ggobi session.  The display window contains a
simple scatterplot.  Brushing has been used, and three different
symbols are in use.
}}
\vspace{.4in}
}

\section{Layout and functionality}

\subsection{The major functions}

Across the top of the control panel in Figure 1 stretch a row of buttons for
selecting major GGobi functions from pull-down menus.  Buttons
such as ``File'', ``Display,'' ``ViewMode'', ``Tools'', ``Options'' and
``DisplayTree'' organize functions in menus.  

As expected, the ``File'' button opens a menu for selecting
input/output functions as well as exiting.

The ``Display'' button opens a manu for opening a new plotting
window.  The display types are
\begin{itemize}
\itemsep 0em
\item Scatterplot,
\item Scatterplot matrix, 
\item Parallel coordinates plot,
\item Time series plots.
\end{itemize}

If the data has missing values, a scatterplot or scatterplot matrix
of the ``missingness'' information can be opened.

The ``ViewMode'' button opens a menu for selecting from ggobi's
inventory of interactive graphics operations: 
\begin{itemize}
\itemsep 0em
\item 1-D dotplots and average shifted histograms,
\item 2-D XY-plots, 
\item 1-D and 2-D tours, random or guided,
\item axis scaling,
\item brushing, 
\item identification, 
\item point motion.  
\end{itemize}

The unifying feature of these operations is that they take over the
display area and dictate the mouse operations for directly
manipulating the view.  Examples are mouse sweeps to control 3-D
rotations, or moves of the brush when brushing.  These operations
also determine the content of the control panel on the left of the
window (see below).  Exactly one mode is selected at all times.
``ViewModes'' will be discussed in greater detail in
section~\ref{slbl:ViewModes}.

The ``Tools'' button gives access to 
\begin{itemize}
\itemsep 0em
\item a table of variable statistics with variable selection functionality,
\item a variable transformation pipeline,
\item an variable sphering panel,
\item jittering controls,
\item a panel for hiding groups of cases,
\item subsetting functions for systematic and random subsampling, 
\item assignment of a value to missings.

\end{itemize}
The division between ``ViewMode'' functions and ``Tools'' is somewhat
arbitrary.  The ``ViewMode'' functions determine the mouse
interactions in the display windows, while none of the ``Tools''
does.  Furthermore, ``ViewMode'' functions populate the left hand
control panel in the main ggobi window, while ``Tools'' create their
own permanent control panels or views of the data in separate
windows, as shown in figure~2.  For example, the variable selection
and statistics ``Tool'' opens a table of data each variable, and the
transformation ``Tool'' generates a transformation control window.

The ``Options'' button allows users to set some options for the
main control window:  whether tooltips are displayed, for instance,
and whether the control panel is shown.

The ``DisplayTree'' menu allows users to open a tree listing
all the currently open display windows, each of which may contain
several plots.

In some ViewModes, an ``I/O'' menu appears, with options for
reading and writing data pertaining to that mode.

\subsection{Graphical displays}
\label{slbl:GraphicalDisplays}

As mentioned earlier, the main display types are
\begin{itemize}
\itemsep 0em
\item scatterplot,
\item scatterplot matrix,
\item parallel coordinates plot, and
\item time series plots.
\end{itemize}

\subsubsection{Current display, current plot}

Since there are multiple displays, some of which contain multiple
plots, the question arises:  Which plot in which display window
corresponds to the control panel?  If you select the {\bf Brush} {\bf
ViewMode}, how can you tell which plot is going to respond to
brushing?

There is in ggobi a notion of the ``current display'' and the
``current plot.''  (We need both because some displays, like the
scatterplot matrix, contain multiple plots.) The current plot is the
one which is outlined with a thick white border; the current display
is the one which contains the current plot.

To reset the current plot and display, just click once (left, right
or middle) in the plot you wish to address.  To understand the
effects of this selection, open a few displays and set them in
different ViewModes, then click on different plots and see what
happens.  The white border should follow your actions, and the
control panel should update so that its panels correspond to the
current display type and ViewMode.

\subsubsection{Missing data displays}
% \ref{slbl:MissingData}


\subsection{Selecting variables for plotting}
\subsection{Control panels}

\section{Data format}
\label{slbl:DataFormat}
\subsection {XML}
\label{slbl:XML}
\subsection {Database access}
\label{slbl:MySQL}

\section{Integration of ggobi with other software systems}
\label{slbl:Integration}

\section{View modes}
\label{slbl:ViewModes}

\subsection{1D plots}
\subsection{XY plots}
\subsection{Tours}
\label{slbl:1DTour}


\subsection{Scaling of axes}
\label{slbl:Scaling}

\subsubsection{Drag}

For the default setting, Drag, the actions of the mouse can be
described in terms of a camera:  you're operating a camera and
looking at a projection of the data in the viewfinder.  When you use
the left button, the camera is panning freely around, following the
mouse exactly.  When you use the middle or right button, you're
zooming the camera in and out.

\subsubsection{Click: Pan or Zoom}

When you select the ``Click'' interaction style, the camera metaphor
becomes weaker, but your control of the panning and zooming becomes
more precise.

With ``Pan'' selected, the mouse controls the endpoint of a line
segment which is anchored at the center of the plot (just where the
center of the crosshair is in Drag style).  When you press the space
bar, you'll cause the plot to pan so that the endpoint becomes the
new center.  Repeated presses repeat the mostion in the same
direction -- convenient for browsing time-dependent data, for
instance.

With ``Zoom'' selected, the visual guide changes again:  this time,
the mouse controls a rectangle, and two keys are used:  ``i'' to
zoom in and ``o'' to zoom out an amount proportional to the size
of the rectangle.

To reset the plot, use the menu marked Reset in the main menubar:
it has two entries, allowing pan and zoom to be reset separately.

\subsubsection{Pan and Zoom Options}

By the default, the panning and zooming of the plot is unconstrained,
moving or rescaling vertically and horizontally with each action.
The pan and zoom options allow it to be constrained so that only
one axis is affected, convenient for browsing one variable at a time.

\subsection{Brush: Linked brushing of points and lines}
\label{slbl:Color}

Brushing is often performed when only a single display is visible,
but it is most interesting and useful to perform brushing with more
than one linked display showing different views of the same data.  

To interactively paint points, drag left to move the ``brush'' within
the plotting window, or drag middle to change the size or shape of
the brush while you paint.  (If you lose the brush by pulling it
outside the plotting window, you can grab it again if you press the
left or middle button while the cursor is inside the display window.)

\subsubsection{Brush On}
%
When the {\bf Brush on} toggle is checked, moving the brush
over a plotted point causes that point to change its color or
plotting character (called a glyph).  If the brush is turned off, the
brush can be freely moved across the plotting window and it does not
change the points.  

This is useful if you are plotting a very large number of points,
and you want to position the brush before painting, because you
can move it much more quickly across the plot.  [This isn't true
in the default mode, where the brush jumps to the cursor.  Shall
I re-add the other mode?]

%
\subsubsection{Points and lines}
If {\bf Points} is selected, the brush is drawn as a rectangle.
As the brush is moved across the points, any points contained by
the brush are redrawn using the currently selected glyph and color.
If {\bf Lines} is selected, the brush is drawn as a crosshair, and
as the brush is moved in the window, any lines intersecting either
the vertical or horizontal ``hair'' are redrawn in the chosen color.
(There is no line brushing implementation for line types yet.)
If both {\bf Points} and {\bf Lines} are
selected, the brush is drawn as a crosshair inside a rectangle,
and both point and line brushing are performed.

\subsubsection{Color and glyph}
%
use the {\bf Color and glyph} menu to choose whether to brush
with color, glyph, or both, or whether to hide the points you
paint.

%
\subsubsection{Brushing modes:  persistent, transient}
%
These are two brushing modes.
\medskip
\noindent
\\{\bf Persistent}:  When you brush a point, it retains its new color or glyph
when the brush has moved away.
\\{\bf Transient}:  As the brush moves off a point, it returns to the color and
glyph it had before the brush covered it.

\subsubsection{Undo}
%
Clicking on the {\bf Undo} button restores the glyph and color and
visibility of all points painted between the last mouse-down and
mouse-up.

\subsubsection{Reset Menu}
%
When the brushing mode is active, the Reset Menu in the main
menu bar contains these items:

\begin{tabbing}
 {\bf Show all points} \hspace{.5in} \= Make all points visible. \\
%{\bf Reset point colors} \> Restore all points to the default color. \\
%{\bf Reset glyphs} \> Restore all points to the default glyph. \\
 {\bf Show all lines} \> Make all lines visible. \\
%{\bf Reset line colors} \> Restore all lines to the default color. \\
 {\bf Reset brush size} \> Reset the brush to its default size and position. \\
\end{tabbing}
%

\subsection{Linked identification of points}

This mode is used to display labels near points in the plotting
window.  The labels are taken from the file of row or case labels
supplied by the user; if the file is not present, the row number of
each case is used.  To see these labels, simply move the cursor
inside the plotting window.  The label of the point nearest the
cursor is displayed.

Identification in one window is instantly reflected in all linked windows.

To cause a label to become ``sticky,'' click left when the target label
is printed.  The printing style changes and the label now remains
printed as the cursor moves off, and even remains printed as you leave
the {\bf Identify} mode.  It is possible to rescale or rotate data, and
the sticky labels will continue to be printed next to their associated
points.

To cause a label to become ``unsticky,'' return to the {\bf Identify}
mode and click left again when the target point is nearest the cursor.
It is also possible to restore all labels to unsticky status by
clicking on the {\bf Remove Labels} button.  You can also see all the
labels at once by clicking on {\bf Make all sticky}. 

\subsection{Line editing}

\section {Display types}
\subsection{Scatterplot}
\subsection{Scatterplot matrix}
\subsection{Parallel coordinate plot}
\subsection{Time series plots}

\newpage
\section{Tools}
\subsection{Variable selection and statistics table}
\label{slbl:VarStats}

This important table is opened by selecting the first entry on the
{\bf Tools} menu.  It has several important functions:
\begin{itemize}
\itemsep 0em
\item the display of variable statistics,
\item variable selection for other tools,
\item setting variable ranges, and
\item cloning variables.
\end{itemize}

Its first purpose is to display a few statistics for each variable:
the current variable transformation (if any); the minimum, maximum,
mean, and median of the raw data; the number of missing values per variable.

You can also use it to select variables -- not for plotting, but to
be operated on by other tools.  Variables are selected by highlighting
rows, and the control and shift keys are modifiers that allow multiple
rows to be highlighted.  The variable transformation tool, among
others, will operate on the variables selected in this way.

These selected variables will also respond to operations contained
within this panel:  you can reset the variable ranges that are used
for projecting the data into the plotting window.  This is especially
useful for a data set where several of the variables have the same units.

The selected variables can also be cloned, and the new variables
you create will be added to the table as well as the main control panel.

\subsection{Jittering}

Select {\em Variable jittering ...} to open a panel that allows
random noise to be added to selected variables.

First specify the variables you wish to jitter.  By default, the
variables plotted in the current display will be affected; if you
wish to select others, use the {\bf Variable selection and
statistics} tool.

Choose between uniform and random jitter, and then set the degree of
jitter using the slider.  To rejitter without changing the degree of
jitter, simply click on the {\bf Jitter} button.

\subsection{Imputation controls for missing data}
\subsection{Sphere}
\label{slbl:Sphere}
\subsection{Subsetting}

Select {\em Case subsetting and sampling ...} to open a panel
that allows subsets to be specified in one of five ways.

{\bf Random sample without replacement}:  Specify the number of
cases to be in the sample.
\\{\bf Consecutive block}:  Specify the first and last row of the block.
\\{\bf Every nth case}:  Specify the interval and the first row.
\\{\bf Sticky labels}:  All cases with a ``sticky'' label will
  be in the subset.  (See {\em Identification} for a description
  of sticky labels.)
\\{\bf Row labels}: Type in a row label, and all cases with that
  label will be in the subset.

Select one of those five, then click on {\bf Subset} in the
bottom row of the panel.  If you want to re-include all rows, 
select the {\bf Include all} button in the bottom row.

If the {\bf Rescale} button is checked, then the plots will be
rescaled to exclude all points not in the subset.  If it is
not checked, the points will be hidden but not excluded from
plot scaling operations.

One purpose of subsetting is to allow the use of ggobi on data matrices
that are so large that dynamic and interactive operations begin to
become painfully slow.  By selecting a smaller subset, a user can
work on that subset at a comfortable speed of rotation and
interaction.  Another purpose is to do graphical cross-validation:
if the feature you see is still there in repeated subsamples, there's
a good chance it's not just an artifact of visualization.

\section{Implementation}

\section{Differences from xgobi}
\label{slbl:xgobi}

In this section, we summarize the key differences between ggobi
and xgobi for those readers who are already familiar with xgobi.

\subsection {Multiple displays}

The first thing you'll notice when you look at a ggobi display is
that the plotting window has become separated from the control
panels.  The main reason for that change is so that a ggobi process
can have multiple display windows, of the same type or of different
types.  In addition to the basic scatterplot, ggobi currently has
scatterplot matrices, parallel coordinates plots, and time series
plots.  (See \ref{slbl:GraphicalDisplays} for more detail.)

This design change has had far-reaching effects.

First, user interactions available for the simple scatterplot display
can now be made available for other display types.  In xgobi, for
instance, there is a parallel coordinates display, but it's not
possible to brush it -- in ggobi, it is. 

Unfortunately, having multiple displays introduces a new source of
ambiguity: you now have to tell ggobi which display, and which plot
within a display, you want to address.  Do that by simply clicking
inside the target plot.  ggobi will draw a thick white outline around
that plot so that you can check which plot your actions will be
addressing.  The ViewMode panel in the main ggobi window should
always correspond to the state of the current display, too.  We need
more user experience before we can tell whether this approach is
satisfactory.

The basis for linking has changed, too:  since all displays are
linked by default, it's no longer necessary to run multiple processes
in order to achieve linked displays.

One of the most interesting implications of using multiple displays
is that a ggobi process is no longer restricted to a single data
set.  The XML file format makes it easy to specify two or more data
matrices in a single file, as described in section \ref{slbl:XML}.
In addition, it's possible to add data matrices using the Read button
on the File menu or using R.  (The R~-~ggobi interface will be
introduced below, and it's more fully described in section
\ref{slbl:Integration}.)

The rules and the interface for linking across data sets have not yet
been defined.

With multiple displays, too, we no longer have to launch a new
process to open missing value plots -- the plots of 1's and 0's
which represent the presence and absence of data in each cell.

A convenient side effect of multiple displays is that, since each
display now sits in a window of its own, it's now very simple to
adjust the aspect ratio of a plot; this simple operation is very
awkward in xgobi.

\subsection {Data format}

Before we describe other key changes in the visible design, we'll
introduce the changes in data format.  The xgobi format, in which a
set of files with a common base name is used, is still supported,
though some file formats have changed ({\em .colors}), and some are
no longer supported ({\em .bin} and {\em .vgroups}).  (See section
\ref{slbl:DataFormat} for details.)

The new format, in which all the data lives in one file, is written
in XML.  XML, the Extensible Markup Language, is a widely used
language for specifying structured documents and data to be viewed
and exchanged.  It was initially intended to be read by browsers, but
it is also used to define documents that are read by other software.
XML files can be validated automatically, and XML specifications can
be easily extended, too, by adding to the set of tags in use.

As ggobi grows and develops, we expect to favor the XML format:  it
will become increasingly difficult to keep the old format up to
date.  For instance, we will no longer support the ``.bin'' file used
by xgobi, which can be used to store the data in a binary format.
Instead, the XML file will have a tag that can be used to give the
name of a binary file to be read -- and the binary format we use will
be portable.

A few XML data files are included in the sample ggobi data, and
the details of their format is described in ??.

Another innovation in data access is the ability to read data
directly from a MySQL database, as described in section \ref{slbl:MySQL}.

\subsection{Integration}

Many xgobi users are also users of the SPlus or R statistics
software, and have used the S function which launches an xgobi
process viewing S data.  Once that launch occurred, the resulting
process was utterly independent of its parent.  The xgobi authors
did some experiments in the early 90s to achieve a more intimate
connection, but made little headway.  (reference)

With ggobi, that problem has been solved, and it's now possible
to have real-time integration between ggobi and a variety of
other software environments.  An example of this integration is
the embedding of ggobi into R (or S), with the addition of a set of
R (or S) functions that manipulate ggobi data and displays,
resetting data values, projection, and the appearance of the plot.

For more details, see section \ref{slbl:Integration}, or read
(reference).

\subsection {Variable selection}

There have been a few changes in variable selection.  The
familiar variable circles are still used for high-dimensional
view modes, but we've switched to a simple checkbox interface
for plots where only one or two variables can be selected
simultaneously.  In these plots, the rich feedback provided
by the variable circles is not needed, and may just be confusing
to novices.

The basics of the user interface haven't changed, though:
click with the left button to select a variable to be plotted
horizontally and the middle (or right) button to plot vertically.

\subsection {The variable selection and statistics table}

There's a second panel that has variable selection functions called
the {\bf Variable selection and statistics table}; it's opened by
selecting the first entry on the {\bf Tools} menu.  This table
displays a handful of useful statistics for each variable, and it is
also used to select variables -- not for plotting, but to be operated
on by other tools.  Several of the tools, such as variable
transformation and jittering, will operate on the plotted variables
in the current display by default.  However, if any rows in this
table are highlighted, then all selected variables will be affected.

This table can also be used to specify limits for variables or groups
of variables, and so we have dispensed with the {\em .vgroups}
functionality in xgobi.

Variable cloning is another new feature: it appears as a button
on the variable selection and statistics table.

For more detail on this table, see section \ref{slbl:VarStats}.

\subsection{Changes in ViewModes and Tools}

{\bf Brush} may be the {\bf ViewMode} that has changed the most,
because ggobi has a much richer notion of color selection than
xgobi.  Open the {\bf Choose Symbol} panel, and then double-click on
any element of the color palette to bring up a color selection widget
with access to the full color map.  Notice that you can change the
background color as well as any of the foreground colors.
%See section \ref{slbl:Color}.

{\bf Scale} has also changed -- the direct manipulation shifting and
scaling methods work as they did in xgobi, though you now specify
whether you want to {\bf Pan} or {\bf Zoom}, and then use the same
mouse button for both.  New methods (the {\bf Click} interaction
style) that allow greater precision have replaced the xgobi controls
that were represented by buttons on the control panel.  See section
\ref{slbl:Scaling}.

The tour methods in ggobi are still evolving:  many things are not
yet implemented, such as projection pursuit, but new things are
beginning to appear.  In the {\bf 1DTour}, a projection of several
variables is viewed an an average shifted histogram, as described
in section \ref{slbl:1DTour}.

The redesign of the tour methods is reflected in the {\bf Sphere}
tool, which also appears in the most recent versions of xgobi.
Instead of automatically sphering variables in projection pursuit,
ggobi allows you the choice:  you can use the {\bf Sphere} tool to
decide which variables to sphere.  Since this method makes use of
variable cloning, it creates new variables, allowing you to look at
plots of principal components against the original data.

See section \ref{slbl:Sphere} for details and pictures.

\subsection{On-line help}

The on-line help system used in xgobi has been replaced with
``tooltips,'' so leaving the mouse over a widget for a couple of
seconds brings up a phrase describing the function of that widget.
If the tooltips annoy you, you can turn then off using a
checkbox on the {\bf Options} menu.

\end {document}

