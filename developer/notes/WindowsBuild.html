<html>
<title>Building GGobi on Windows from Source</title>
<body>
<h1>Building GGobi on Windows from Source</h1>

This document attempts to explain how to build GGobi (>= 2.0) for Windows. It 
assumes that the reader is reasonably familiar with building packages in linux.

<h2>Setup</h2>

<h3>Required tools and libraries:</h3>

<h3>MinGW:</h3> The tools we use to build the GGobi distribution depend
on having the <a href="http://www.mingw.org">MinGW/MSYS tools</a>
installed.  MinGW is Minimalist GNU for Windows, 
essentially gcc for Windows. MSYS is a build environment for MinGW. For MinGW, 
there are options within the installation that allow you to customize which 
packages are installed (this can also be done after the initial installation). 
First it asks you whether you want the previous, current, or candidate version. 
Go ahead and choose 'candidate' so that we're on the bleeding edge. 
The next step lets you decide which individual packages are installed. 
Be sure that you include the MinGW base tools and the g77 
package (if you want to build Rggobi2, it's an R thing). You'll also want the 
<a href="http://prdownloads.sourceforge.net/mingw/msysDTK-1.0.1.exe?download">MSYS DTK</a> 
for tools like autoconf. Download and install these three packages.

<h3>GTK development environment:</h3> Download the latest GTK+
<a href="http://gladewin32.sourceforge.net/">developer package</a> and install it.

<h3>pkg-config:</h3> The GTK developers pack includes pkg-config, but since we're using 
MSYS we need at least version 0.20. At the time of this writing, the included pkg-config is 
only 0.15, so we need to get the latest from the 
<a href="http://www.gimp.org/~tml/gimp/win32/downloads.html">GTK+ win32 downloads page</a>.
Unzip it into the toplevel GTK directory.

<h3>GObject Builder:</h3> You need the 
<a href="http://http://www.5z.com/jirka/gob.html">GObject builder</a> to build GGobi from SVN.
First though you need the Flex library. Get the package offered by the 
<a href="http://unxutils.sourceforge.net/">UnxUtils project</a> and move the contents 
of the <code>/usr/local/lib</code> directory in the zip file to your <code>/GTK/lib</code> directory. 
Now you can unpack the gob2 archive into your home directory, <code>configure</code>, 
<code>make</code>, and <code>make install</code> it.

<h3>Nullsoft Installer:</h3> GGobi uses the nullsoft installation system, so 
if you want to build the GGobi installer (exe), download and install the latest 
<a href="http://nsis.sourceforge.net/">nullsoft installer</a> now.

<h3>Subversion:</h3> In order to get the latest source code, you'll need 
<a href="http://subversion.tigris.org/">subversion</a>.

<h3>Path setup:</h3>


<h2>Compilation:</h2> Start MSYS. You will find yourself in your "user" directory. 
This is where we will do all of our work. Type <code>svn co http://ggobi.org/svn/ggobi ggobi</code> to 
grab the entire repository, including Rggobi2, the website, the GGobi book, etc. 
If you're not a core GGobi dev or you're only interested in GGobi itself, 
<code>svn co http://ggobi.org/svn/ggobi/ggobi/trunk ggobi</code> should do. Next, switch to the 
<code>~/ggobi/ggobi/trunk</code> (or <code>~/ggobi</code> if you only got GGobi) directory and type: 
<code>./configure --enable-local --with-plugins="DataViewer ggvis VarCloud DescribeDisplay"</code> 
and then <code>make</code>. Note that if you ever want to debug GGobi, you can add <code>--enable-debug</code> 
to the configure line. To enable the plugins you built, run <code>make ggobirc</code> now.

<P>If you have trouble send an <a href="mailto:ggobi-help@ggobi.org">email</a>, 
complete with the error messages you got in the MSYS window. We'll aim to help as
possible.

<h2>Building the Self-installing Executable</h2>

To create the self-installing GGobi executable, we will use the Nullsoft Scriptable 
Installation System. Make sure that
<code>iscc.exe</code> (the Inno compiler) is on your path.

<p>Run <code>make win32-installer</code> to build the setup executable.

<h1>Building RGGobi on Windows:</h1>

<p>Follow the instructions for building ggobi on Windows in the ggobi
distribution files. You'll at least need the same development
environment.

<h2>Obtain necessary files</h2>
<a href="http://www.ggobi.org/Download">Download</a> the latest Rggobi and 
unpack it into <code>/c/build/src</code>.

<p>The R build system requires <a href="http://www.activestate.com/store/languages/register.plex?id=ActivePerl">ActivePerl</a>.
Make sure it (<code>/c/perl</code>) is on your path.
<p>In order to build Windows help for the documentation, you need <code>hhc.exe</code>
from the <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/htmlhelp/html/hwMicrosoftHTMLHelpDownloads.asp">HTML Help Workshop</a>
on your path. Yes, I know it's from Microsoft, but you need it.

<h2>Build the binary R package</h2>
Enter the <code>Rggobi2</code> directory and run <code>./configure</code>.
<p>Now you have to hack the <code>build</code> perl script in the <code>R/bin</code>
directory so that it doesn't prefix <code>cygwin</code> to paths when running tar.
<p>Finally, make sure R is on your path, and in the parent directory, run:
<PRE>
  Rcmd build --binary Rggobi2
</PRE>

<h2>Installing the package</h2>

Install the Rggobi package using the R menu for installing packages.

<P>You should be ready to start it up:

<PRE>
> library(Rggobi2)
> ggobi()
</PRE>

<hr>
<P> These notes are by Michael Lawrence.
